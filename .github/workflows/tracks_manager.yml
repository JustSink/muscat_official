name: Tracks Manager

on:
  push:
    paths:
      - 'tracks/*.mp3'
      - 'tracks/*.wav'
      - 'tracks/*.ogg'

jobs:
  update_metadata:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Update tracks list
        run: |
          echo "üéµ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–∫–æ–≤"
          echo "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: $(date)" > tracks/LAST_UPDATED.md
          echo "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–∫–æ–≤: $(ls tracks/*.mp3 tracks/*.wav tracks/*.ogg 2>/dev/null | wc -l)" >> tracks/LAST_UPDATED.md
          
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add tracks/LAST_UPDATED.md
          git commit -m "üìä –û–±–Ω–æ–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤" || echo "üü° –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
          git push || echo "üü° –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—à–∏—Ç—å"
          
          echo "‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–∫–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!"