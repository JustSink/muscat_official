name: Upload Tracks from Issues

on:
  issues:
    types: [opened]

jobs:
  process_track:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Simple test
        run: |
          echo "üîç –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç - —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é"
          mkdir -p tracks
          
          # –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ Issue
          echo "Issue #${{ github.event.issue.number }}" > "tracks/issue_info.txt"
          echo "Title: ${{ github.event.issue.title }}" >> "tracks/issue_info.txt"
          echo "User: ${{ github.event.issue.user.login }}" >> "tracks/issue_info.txt"
          
          # –ö–æ–º–º–∏—Ç–∏–º –∏ –ø—É—à–∏–º
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add tracks/
          git commit -m "üìù –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Issue #${{ github.event.issue.number }}"
          git push
          
          echo "‚úÖ –§–∞–π–ª —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!"