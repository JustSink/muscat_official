name: Upload Tracks from Issues

on:
  issue_comment:
    types: [created]

jobs:
  process_track:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Debug info
        run: |
          echo "üîÑ Workflow –∑–∞–ø—É—â–µ–Ω!"
          echo "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${{ github.event.comment.body }}"
          echo "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${{ github.event.comment.user.login }}"
          echo "–ï—Å—Ç—å –≤–ª–æ–∂–µ–Ω–∏—è: ${{ toJSON(github.event.comment.attachments) }}"

      - name: Create test file
        run: |
          mkdir -p tracks
          echo "–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –≤ $(date)" > tracks/test_workflow.txt
          echo "‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ tracks/"

      - name: Success
        run: echo "üéâ Workflow –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É tracks/"