<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Muscat Player</title>
  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#111; color:#fff; }
    /* здесь оставляем твои стили, которые были изначально */
  </style>
</head>
<body>
  <!-- твоя структура интерфейса остаётся неизменной -->

  <script>
    const tracks = [
      { name: "Believer", artist: "Imagine Dragons", src: "believer.mp3" },
      { name: "Blinding Lights", artist: "The Weeknd", src: "blindinglights.mp3" },
      { name: "Lose Yourself", artist: "Eminem", src: "loseyourself.mp3" }
    ];

    let currentTrackIndex = -1;
    let isPlaying = false;
    const audio = new Audio();

    const miniPlayerContent = document.querySelector('.mini-player-content');
    const bigPlayer = document.getElementById('big-player');
    const bigTrackName = document.querySelector('.big-player-name');
    const bigTrackArtist = document.querySelector('.big-player-artist');
    const playPauseBtn = document.getElementById('play-pause-btn');

    function updatePlayPauseIcons(){
      const miniBtn = document.getElementById('mini-play-pause-btn');
      miniBtn.textContent = isPlaying ? '⏸' : '▶️';
      playPauseBtn.textContent = isPlaying ? '⏸' : '▶️';
    }

    function togglePlayPause(){
      if(currentTrackIndex === -1){
        playTrack(0);
        return;
      }
      if(isPlaying){
        audio.pause();
        isPlaying = false;
        updatePlayPauseIcons();
      } else {
        audio.play()
          .then(()=>{ isPlaying = true; updatePlayPauseIcons(); })
          .catch(err => console.error("Ошибка воспроизведения:", err));
      }
    }

    function playTrack(index, direction = null){
      const track = tracks[index];
      currentTrackIndex = index;
      audio.src = track.src;
      audio.play()
        .then(()=>{ isPlaying = true; updatePlayPauseIcons(); })
        .catch(console.error);

      // Обновляем большой плеер
      bigTrackName.textContent = track.name;
      bigTrackArtist.textContent = track.artist;

      // Обновляем мини плеер (с анимацией или без)
      if(direction){
        const newContent = document.createElement('div');
        newContent.className = 'mini-player-content';
        newContent.innerHTML = `<div class="now-playing-name">${track.name}</div><div class="now-playing-artist">${track.artist}</div>`;
        miniPlayerContent.parentElement.appendChild(newContent);
        miniPlayerContent.remove();
      } else {
        miniPlayerContent.innerHTML = `<div class="now-playing-name">${track.name}</div><div class="now-playing-artist">${track.artist}</div>`;
      }
    }

    // обработчики кнопок, переключения треков и т.д. оставляем как у тебя было
    playPauseBtn.onclick = ()=>togglePlayPause();
    document.getElementById('mini-play-pause-btn').onclick = (e)=>{ e.stopPropagation(); togglePlayPause(); };
  </script>
</body>
</html>
