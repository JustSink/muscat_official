<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Muscat Player</title>
  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#111; color:#fff; }
    .tab-bar { position:fixed; bottom:0; width:100%; display:flex; background:#222; border-top:1px solid #333; }
    .tab-bar button { flex:1; padding:10px; background:none; border:none; color:#aaa; font-size:14px; cursor:pointer; }
    .tab-bar button.active { color:#fff; font-weight:bold; }
    .page { display:none; padding:20px; }
    .page.active { display:block; }
    .track { padding:10px; border-bottom:1px solid #333; cursor:pointer; }
    .mini-player { position:fixed; bottom:50px; left:0; right:0; background:#222; padding:10px; display:flex; justify-content:space-between; align-items:center; cursor:pointer; }
    .mini-info { flex:1; }
    .big-player { position:fixed; top:0; left:0; right:0; bottom:0; background:#000; display:none; flex-direction:column; justify-content:center; align-items:center; z-index:10; }
    .big-player.active { display:flex; }
    .controls { margin-top:20px; display:flex; gap:20px; }
    .controls button { background:#333; border:none; padding:10px 15px; border-radius:50%; cursor:pointer; color:#fff; }
    .close-btn { position:absolute; top:20px; right:20px; background:#333; border:none; color:#fff; padding:10px; border-radius:10px; cursor:pointer; }
  </style>
</head>
<body>
  <!-- –°—Ç—Ä–∞–Ω–∏—Ü—ã -->
  <div id="home" class="page active">
    <h2>–ì–ª–∞–≤–Ω–∞—è</h2>
    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Muscat Player üéµ</p>
  </div>

  <div id="library" class="page">
    <h2>–ú–µ–¥–∏–∞—Ç–µ–∫–∞</h2>
    <h3>–õ—é–±–∏–º—ã–µ —Ç—Ä–µ–∫–∏</h3>
    <div id="favorites">
      <div class="track" data-index="0">Imagine Dragons ‚Äì Believer</div>
      <div class="track" data-index="1">The Weeknd ‚Äì Blinding Lights</div>
      <div class="track" data-index="2">Eminem ‚Äì Lose Yourself</div>
    </div>
  </div>

  <!-- –ú–∏–Ω–∏ –ø–ª–µ–µ—Ä -->
  <div id="miniPlayer" class="mini-player" style="display:none;">
    <div class="mini-info">
      <div id="miniTrack">–ù–∞–∑–≤–∞–Ω–∏–µ</div>
      <div id="miniArtist">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</div>
    </div>
    <button id="miniPlay">‚ñ∂Ô∏è</button>
  </div>

  <!-- –ë–æ–ª—å—à–æ–π –ø–ª–µ–µ—Ä -->
  <div id="bigPlayer" class="big-player">
    <button id="closeBig" class="close-btn">‚úñ</button>
    <h2 id="bigTrack">–ù–∞–∑–≤–∞–Ω–∏–µ</h2>
    <p id="bigArtist">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</p>
    <div class="controls">
      <button id="prev">‚èÆ</button>
      <button id="playPause">‚ñ∂Ô∏è</button>
      <button id="next">‚è≠</button>
    </div>
  </div>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
  <div class="tab-bar">
    <button id="tabHome" class="active">–ì–ª–∞–≤–Ω–∞—è</button>
    <button id="tabLib">–ú–µ–¥–∏–∞—Ç–µ–∫–∞</button>
  </div>

  <script>
    const pages = { home: document.getElementById('home'), library: document.getElementById('library') };
    const tabHome = document.getElementById('tabHome');
    const tabLib = document.getElementById('tabLib');

    function switchPage(page){
      for(let key in pages){ pages[key].classList.remove('active'); }
      pages[page].classList.add('active');
      tabHome.classList.toggle('active', page==='home');
      tabLib.classList.toggle('active', page==='library');
    }

    tabHome.onclick = ()=>switchPage('home');
    tabLib.onclick = ()=>switchPage('library');

    // –¢—Ä–µ–∫–∏
    const tracks = [
      { name:"Believer", artist:"Imagine Dragons", src:"believer.mp3" },
      { name:"Blinding Lights", artist:"The Weeknd", src:"blindinglights.mp3" },
      { name:"Lose Yourself", artist:"Eminem", src:"loseyourself.mp3" }
    ];

    let currentTrackIndex = -1;
    let isPlaying = false;
    const audio = new Audio();

    const miniPlayer = document.getElementById('miniPlayer');
    const miniTrack = document.getElementById('miniTrack');
    const miniArtist = document.getElementById('miniArtist');
    const miniPlay = document.getElementById('miniPlay');

    const bigPlayer = document.getElementById('bigPlayer');
    const bigTrack = document.getElementById('bigTrack');
    const bigArtist = document.getElementById('bigArtist');
    const playPause = document.getElementById('playPause');

    function loadTrack(index){
      const t = tracks[index];
      currentTrackIndex = index;
      audio.src = t.src;
      miniTrack.textContent = t.name;
      miniArtist.textContent = t.artist;
      bigTrack.textContent = t.name;
      bigArtist.textContent = t.artist;
      miniPlayer.style.display = 'flex';
    }

    function updateIcons(){
      miniPlay.textContent = isPlaying ? '‚è∏' : '‚ñ∂Ô∏è';
      playPause.textContent = isPlaying ? '‚è∏' : '‚ñ∂Ô∏è';
    }

    function togglePlay(){
      if(currentTrackIndex===-1){ loadTrack(0); }
      if(isPlaying){
        audio.pause();
        isPlaying=false;
        updateIcons();
      } else {
        audio.play().then(()=>{ isPlaying=true; updateIcons(); }).catch(console.error);
      }
    }

    // –ù–∞–≤–µ—Å–∏–º –∫–ª–∏–∫–∏ –Ω–∞ —Ç—Ä–µ–∫–∏
    document.querySelectorAll('#favorites .track').forEach(el=>{
      el.onclick = ()=>{
        loadTrack(el.dataset.index);
        audio.play().then(()=>{ isPlaying=true; updateIcons(); }).catch(console.error);
      };
    });

    // –ú–∏–Ω–∏-–ø–ª–µ–µ—Ä –∫–Ω–æ–ø–∫–∞
    miniPlay.onclick = (e)=>{ e.stopPropagation(); togglePlay(); };

    // –û—Ç–∫—Ä—ã—Ç–∏–µ –±–æ–ª—å—à–æ–≥–æ –ø–ª–µ–µ—Ä–∞
    miniPlayer.onclick = ()=>{ bigPlayer.classList.add('active'); };

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –±–æ–ª—å—à–æ–≥–æ –ø–ª–µ–µ—Ä–∞
    document.getElementById('closeBig').onclick = ()=>{ bigPlayer.classList.remove('active'); };

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏–º –ø–ª–µ–µ—Ä–æ–º
    playPause.onclick = ()=>togglePlay();
    document.getElementById('prev').onclick = ()=>{ if(currentTrackIndex>0){ loadTrack(currentTrackIndex-1); audio.play(); isPlaying=true; updateIcons(); } };
    document.getElementById('next').onclick = ()=>{ if(currentTrackIndex<tracks.length-1){ loadTrack(currentTrackIndex+1); audio.play(); isPlaying=true; updateIcons(); } };

    audio.onended = ()=>{ if(currentTrackIndex<tracks.length-1){ loadTrack(currentTrackIndex+1); audio.play(); isPlaying=true; updateIcons(); } else { isPlaying=false; updateIcons(); } };
  </script>
</body>
</html>
