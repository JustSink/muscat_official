<!DOCTYPE html>
<html>
<head>
    <title>MusCat</title>
    <p>=^‚Ä¢~‚Ä¢^=</p>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        body { 
            font-family: Arial, sans-serif;
            background: #1e1e2f;
            color: white;
            text-align: center;
            padding: 20px;
            margin: 0;
            overflow-x: hidden;
            position: relative;
        }
        .container {
            display: flex;
            width: 200%;
            transition: transform 0.3s ease;
        }
        .player-section, .lyrics-section {
            width: 50%;
            padding: 20px;
            box-sizing: border-box;
        }
        .lyrics-section {
            background: #2a2a3a;
            text-align: left;
            padding: 20px;
            overflow-y: auto;
            height: 100vh;
        }
        .player {
            margin-top: 20px;
            background: #2d2d44;
            padding: 20px;
            border-radius: 15px;
        }
        #nowPlaying {
            margin: 15px 0;
            font-size: 18px;
            min-height: 50px;
        }
        button {
            background: #6a4cff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            margin: 8px;
            font-size: 16px;
            width: 80%;
            max-width: 300px;
        }
        audio {
            width: 100%;
            margin: 15px 0;
        }
        .error {
            color: #ff6b6b;
            margin-top: 10px;
        }
        .lyrics-title {
            color: #6a4cff;
            margin-bottom: 20px;
            text-align: center;
        }
        .lyrics-text {
            white-space: pre-line;
            line-height: 1.6;
        }
        .swipe-hint {
            color: #888;
            margin-top: 20px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –ø–ª–µ–µ—Ä -->
        <div class="player-section">
            <h1>MusCat üéµ</h1>
            
            <div class="player">
                <div id="nowPlaying">–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫</div>
                <div id="error" class="error"></div>
                <audio id="audio" controls></audio>
                
                <button onclick="playTrack(1)">Black Sabbath - N.I.B.</button>
                <button onclick="playTrack(2)">Chase Atlantic - Friends</button>
                <button onclick="stopTrack()">‚èπÔ∏è –°—Ç–æ–ø</button>
            </div>
            <p>Musical Cat - —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –º—É–∑—ã–∫–∏</p>
            <p class="swipe-hint">–°–≤–∞–π–ø–Ω–∏—Ç–µ –≤–ª–µ–≤–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –ø–µ—Å–Ω–∏ ‚Üí</p>
        </div>

        <!-- –°–µ–∫—Ü–∏—è —Å —Ç–µ–∫—Å—Ç–æ–º –ø–µ—Å–Ω–∏ -->
        <div class="lyrics-section">
            <h2 class="lyrics-title" id="lyricsTitle">–¢–µ–∫—Å—Ç –ø–µ—Å–Ω–∏</h2>
            <div class="lyrics-text" id="lyricsText">
                –í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
            </div>
            <p class="swipe-hint">‚Üê –°–≤–∞–π–ø–Ω–∏—Ç–µ –≤–ø—Ä–∞–≤–æ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞</p>
        </div>
    </div>

    <script>
        const audio = document.getElementById('audio');
        const nowPlaying = document.getElementById('nowPlaying');
        const errorDisplay = document.getElementById('error');
        const container = document.getElementById('container');
        const lyricsTitle = document.getElementById('lyricsTitle');
        const lyricsText = document.getElementById('lyricsText');
        
        // –¢–µ–∫—Å—Ç—ã –ø–µ—Å–µ–Ω
        const lyricsData = {
            'track1.mp3': {
                title: 'Black Sabbath - N.I.B. –¢–µ–∫—Å—Ç',
                text: `[–ö—É–ø–ª–µ—Ç 1]\nSomewhere in time\nI was so alone\nNo one to be with...`
            },
            'track2.mp3': {
                title: 'Chase Atlantic - Friends –¢–µ–∫—Å—Ç',
                text: `[–ü—Ä–∏–ø–µ–≤]\nWe're not friends anymore...`
            }
        };

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const config = {
            username: 'JustSink',
            repo: 'muscat_official',
            tracks: [
                {
                    file: 'track1.mp3',
                    name: 'Black Sabbath - N.I.B.'
                },
                {
                    file: 'track2.mp3',
                    name: 'Chase Atlantic - Friends'
                }
            ]
        };

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–∞–π–ø–æ–≤
        let startX = 0;
        let currentX = 0;
        let isDragging = false;

        container.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            isDragging = true;
        }, { passive: true });

        container.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            currentX = e.touches[0].clientX;
            const diff = startX - currentX;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ
            if (diff > 0) {
                container.style.transform = `translateX(-${Math.min(diff, 100)}px)`;
            }
        }, { passive: true });

        container.addEventListener('touchend', () => {
            if (!isDragging) return;
            isDragging = false;
            
            const containerWidth = window.innerWidth;
            const threshold = containerWidth / 4;
            
            if (currentX < startX - threshold) {
                // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
                container.style.transform = 'translateX(-50%)';
            } else {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–ª–µ–µ—Ä
                container.style.transform = 'translateX(0)';
            }
        }, { passive: true });

        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞
        async function playTrack(index) {
            const track = config.tracks[index - 1];
            const url = buildUrl(track.file);
            
            nowPlaying.textContent = `–ó–∞–≥—Ä—É–∑–∫–∞: ${track.name}...`;
            errorDisplay.textContent = '';
            
            try {
                const exists = await checkFileExists(url);
                if (!exists) {
                    throw new Error(`–§–∞–π–ª ${track.file} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                }
                
                audio.src = url;
                await audio.play();
                nowPlaying.textContent = `–°–µ–π—á–∞—Å: ${track.name}`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø–µ—Å–Ω–∏
                if (lyricsData[track.file]) {
                    lyricsTitle.textContent = lyricsData[track.file].title;
                    lyricsText.textContent = lyricsData[track.file].text;
                }
            } catch (err) {
                nowPlaying.textContent = `–û—à–∏–±–∫–∞: ${track.name}`;
                errorDisplay.textContent = err.message;
                console.error('–û—à–∏–±–∫–∞:', err);
            }
        }
        
        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (stopTrack, buildUrl, checkFileExists) –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        function stopTrack() {
            audio.pause();
            audio.currentTime = 0;
            nowPlaying.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫';
        }
        
        function buildUrl(filename) {
            return `https://${config.username}.github.io/${config.repo}/tracks/${filename}`;
        }
        
        async function checkFileExists(url) {
            try {
                const response = await fetch(url, { method: 'HEAD' });
                return response.ok;
            } catch {
                return false;
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–µ–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', () => {
            checkTracks();
            audio.volume = 0.8;
        });

        async function checkTracks() {
            errorDisplay.textContent = '';
            let allAvailable = true;
            
            for (const track of config.tracks) {
                const url = buildUrl(track.file);
                const exists = await checkFileExists(url);
                
                if (!exists) {
                    errorDisplay.textContent += `–§–∞–π–ª ${track.file} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: ${url}\n`;
                    allAvailable = false;
                }
            }
            
            return allAvailable;
        }
    </script>
</body>
</html>